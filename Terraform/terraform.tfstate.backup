{
  "version": 4,
  "terraform_version": "1.12.1",
  "serial": 2972,
  "lineage": "c029ff93-5424-fe6d-e2ae-26e609e1e40d",
  "outputs": {
    "api_gateway_invoke_url_prod": {
      "value": "https://nkogh4squl.execute-api.us-east-1.amazonaws.com/",
      "type": "string"
    },
    "bedrock_knowledge_base_data_source_id": {
      "value": "YLTATGNXDU",
      "type": "string"
    },
    "bedrock_knowledge_base_id": {
      "value": "FAUCSVWT9A",
      "type": "string"
    },
    "cognito_domain_prefix": {
      "value": "app-auth-01233",
      "type": "string"
    },
    "cognito_user_pool_client_id": {
      "value": "7rinto1hm9grfjluf5khm9jjp8",
      "type": "string"
    },
    "cognito_user_pool_client_secret": {
      "value": "gk1c618ud3ffuovvnbr5mtt1s7vtc58364of1j2inamvhhd5f33",
      "type": "string",
      "sensitive": true
    },
    "cognito_user_pool_id": {
      "value": "us-east-1_QDYN9ICmW",
      "type": "string"
    },
    "dynamodb_table_name": {
      "value": "FileMetadata-dev-metadata",
      "type": "string"
    },
    "main_s3_bucket_name": {
      "value": "bucket33-rmmleo",
      "type": "string"
    },
    "s3_folder_summaries_prefix": {
      "value": "folder-summaries",
      "type": "string"
    },
    "s3_kb_source_prefix": {
      "value": "kb-source",
      "type": "string"
    },
    "s3_uploads_prefix": {
      "value": "",
      "type": "string"
    },
    "step_functions_state_machine_arn": {
      "value": "arn:aws:states:us-east-1:510297366615:stateMachine:app-rag-FolderProcessingStateMachine",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "archive_file",
      "name": "aggregate_results_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "416bb5a0d97e28e534e0ad659a6de09d4a5e3f15",
            "output_base64sha256": "vsqz2LPQVOPu4P7eV3/yn8jBF8cXGSoY9JhqX7jf4yM=",
            "output_base64sha512": "sHScQL52cV+yfq7kCJBbkUgRqU+AOoAalNX9WRrVQd8ZvDsLS/tPGqzG7icnsjN5h/dR7Y0EBX3tORBHmFlk+Q==",
            "output_file_mode": null,
            "output_md5": "615f13dfb4f82bb67d50f69a116f89e6",
            "output_path": "./lambda_zips/AggregateResultsLambda.zip",
            "output_sha": "416bb5a0d97e28e534e0ad659a6de09d4a5e3f15",
            "output_sha256": "becab3d8b3d054e3eee0fede577ff29fc8c117c717192a18f4986a5fb8dfe323",
            "output_sha512": "b0749c40be76715fb27eaee408905b914811a94f803a801a94d5fd591ad541df19bc3b0b4bfb4f1aacc6ee2727b2337987f751ed8d04057ded391047985964f9",
            "output_size": 911,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "../AWS_backend/lambda_functions/AggregateResultsLambda.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "delete_s3_metadata_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "9c388f879946cd6e4132523bda03b19262a3289c",
            "output_base64sha256": "VK0dcyNaWeOopV8xF391KweTEnXVG6ccij0HYrSqnZo=",
            "output_base64sha512": "q0BRMOy57C6ex+MqqVYv0qeDT73Qa4DnzKQxsiuNI4I6uIZWVeh4r+8CTuzdF5XGqOTb/Fe5zeU8w53v9BJ/tw==",
            "output_file_mode": null,
            "output_md5": "c34cc632aaa8e05258b979aa3018f12b",
            "output_path": "./lambda_zips/DeleteS3FileMetadataFromDynamoDB.zip",
            "output_sha": "9c388f879946cd6e4132523bda03b19262a3289c",
            "output_sha256": "54ad1d73235a59e3a8a55f31177f752b07931275d51ba71c8a3d0762b4aa9d9a",
            "output_sha512": "ab405130ecb9ec2e9ec7e32aa9562fd2a7834fbdd06b80e7cca431b22b8d23823ab8865655e878afef024eecdd1795c6a8e4dbfc57b9cde53cc39deff4127fb7",
            "output_size": 1251,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "../AWS_backend/lambda_functions/DeleteS3FileMetadataFromDynamoDB.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "identify_studies_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "0e1fe670e1e1f2db5edc64422c1f8a6cabe6e221",
            "output_base64sha256": "K31BEtBzNsxZcrLcaPgoYcxpl2HRKb6A8FCe+Hc7z9U=",
            "output_base64sha512": "AksgIOF4uMa4xbPu0l4TXA44OkssbwWXtZDE9RlV2X/hwk4Wn77m+mOZ0IgNgngxoh1ul08PB2OyfptBSNq/OA==",
            "output_file_mode": null,
            "output_md5": "f72164643af06ae3aa0a39cb47d8187c",
            "output_path": "./lambda_zips/IdentifyStudiesLambda.zip",
            "output_sha": "0e1fe670e1e1f2db5edc64422c1f8a6cabe6e221",
            "output_sha256": "2b7d4112d07336cc5972b2dc68f82861cc699761d129be80f0509ef8773bcfd5",
            "output_sha512": "024b2020e178b8c6b8c5b3eed25e135c0e383a4b2c6f0597b590c4f51955d97fe1c24e169fbee6fa6399d0880d827831a21d6e974f0f0763b27e9b4148dabf38",
            "output_size": 2285,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "../AWS_backend/lambda_functions/IdentifyStudiesLambda.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "ingest_file_to_bedrock_kb_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "e6cedc92662271ae3dc1b8f1f7aea6365dbfd55a",
            "output_base64sha256": "8ZvjOIJzuqf+XujZCR2NOA0p5jLOiq/Kdl2JHKz4O8g=",
            "output_base64sha512": "LghHNuFkD21cJbHPGQBXu5c8EKdLwBSSUzc+rB3qgv+GLQ16tdy2ewvfqo7Oe3IaVyLiIw7EyVhgpAd3LM51hw==",
            "output_file_mode": null,
            "output_md5": "d1c16deaf84b8ec7690df6e6a36d3a16",
            "output_path": "./lambda_zips/IngestFileToBedrockKBLambda.zip",
            "output_sha": "e6cedc92662271ae3dc1b8f1f7aea6365dbfd55a",
            "output_sha256": "f19be3388273baa7fe5ee8d9091d8d380d29e632ce8aafca765d891cacf83bc8",
            "output_sha512": "2e084736e1640f6d5c25b1cf190057bb973c10a74bc0149253373eac1dea82ff862d0d7ab5dcb67b0bdfaa8ece7b721a5722e2230ec4c95860a407772cce7587",
            "output_size": 4884,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "../AWS_backend/lambda_functions/IngestFileToBedrockKBLambda.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "initiate_folder_processing_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "c027a373d3625fe8da991ef4fdf82a93ad0ee819",
            "output_base64sha256": "6puVXFtxwZBoNmuvKf1zEepajPnfSIXFuXiJeXEVoHM=",
            "output_base64sha512": "NUC8iMixBwU2diBsR36HkYDonVSYSscreMB4TW7zQkHaJkY5LT/KU1WTYYhRL5yKjeLuDGHKKD/CMjSNcxCYTA==",
            "output_file_mode": null,
            "output_md5": "eddbd6c955f4396dce81413057afebb0",
            "output_path": "./lambda_zips/InitiateFolderProcessingLambda.zip",
            "output_sha": "c027a373d3625fe8da991ef4fdf82a93ad0ee819",
            "output_sha256": "ea9b955c5b71c19068366baf29fd7311ea5a8cf9df4885c5b97889797115a073",
            "output_sha512": "3540bc88c8b107053676206c477e879180e89d54984ac72b78c0784d6ef34241da2646392d3fca5355936188512f9c8a8de2ee0c61ca283fc232348d7310984c",
            "output_size": 1881,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "../AWS_backend/lambda_functions/InitiateFolderProcessingLambda.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "list_user_files_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "abd70cd4055f6d50a16d4d127b485a8df843712f",
            "output_base64sha256": "4zC9xcymtG2KVySXcg+wJh101ErblcH1EXcAV6rB3eg=",
            "output_base64sha512": "hVXtLYjv+ZxABUVIu7SPjXNpegm9Qy9IqtyWebA5kLWHwtx+punOJ6SDrgQuyU6BVCQeoLigiPPKNXXPCgohbA==",
            "output_file_mode": null,
            "output_md5": "9f4939d2887f0458427f50fd0e1aeb9a",
            "output_path": "./lambda_zips/ListUserFilesFromDynamoDB.zip",
            "output_sha": "abd70cd4055f6d50a16d4d127b485a8df843712f",
            "output_sha256": "e330bdc5cca6b46d8a572497720fb0261d74d44adb95c1f511770057aac1dde8",
            "output_sha512": "8555ed2d88eff99c40054548bbb48f8d73697a09bd432f48aadc9679b03990b587c2dc7ea6e9ce27a483ae042ec94e8154241ea0b8a088f3ca3575cf0a0a216c",
            "output_size": 1707,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "../AWS_backend/lambda_functions/ListUserFilesFromDynamoDB.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "record_s3_metadata_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "4e42b5d2e4776a0e25c0368bd4478272aa4a23ce",
            "output_base64sha256": "LKdZHzOyf7iw+jK4osxdUJs6pLAKSIehmQNpcmfLwuQ=",
            "output_base64sha512": "D8doXIWFJpw+kzggQ7OITHSk8TFdhMNWpvL/32Zafl1OuUO6y4hweeL0z54BNUAFyT5QVpB6M8CWcn0afhsxWA==",
            "output_file_mode": null,
            "output_md5": "ce3ae2ca275406a65da300c750047827",
            "output_path": "./lambda_zips/RecordS3FileMetadataToDynamoDB.zip",
            "output_sha": "4e42b5d2e4776a0e25c0368bd4478272aa4a23ce",
            "output_sha256": "2ca7591f33b27fb8b0fa32b8a2cc5d509b3aa4b00a4887a19903697267cbc2e4",
            "output_sha512": "0fc7685c8585269c3e93382043b3884c74a4f1315d84c356a6f2ffdf665a7e5d4eb943bacb887079e2f4cf9e01354005c93e5056907a33c096727d1a7e1b3158",
            "output_size": 1396,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "../AWS_backend/lambda_functions/RecordS3FileMetadataToDynamoDB.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "summarize_folder_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "3cec4ba4d80517a7e1d056b38ed6a72cc14dd9cd",
            "output_base64sha256": "wYMSr5Xul9hQkyoEEyden9+Du/j/dYhUkU4pPHn7jlA=",
            "output_base64sha512": "wQvOEoxd8bH2HRpigcJmR1fg93G2pDahyJ9qjLCmUVi1W0Wz9fUhg6PQ1CQQgpOqIXpbMAg+64zZK5+JGjZoyw==",
            "output_file_mode": null,
            "output_md5": "b92cac7015c3f8003cf341db4000d736",
            "output_path": "./lambda_zips/SummarizeFolderLambda.zip",
            "output_sha": "3cec4ba4d80517a7e1d056b38ed6a72cc14dd9cd",
            "output_sha256": "c18312af95ee97d850932a0413275e9fdf83bbf8ff758854914e293c79fb8e50",
            "output_sha512": "c10bce128c5df1b1f61d1a6281c2664757e0f771b6a436a1c89f6a8cb0a65158b55b45b3f5f52183a3d0d424108293aa217a5b30083eeb8cd92b9f891a3668cb",
            "output_size": 8070,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "../AWS_backend/lambda_functions/SummarizeFolderLambda.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "summarize_single_study_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "07643fc2dc1a64d9a24aef3f1c2dcc513c818cd5",
            "output_base64sha256": "H2YS9mzGwyWMUwdvSB019/sz14SZdN1GpD+Rz47Ougo=",
            "output_base64sha512": "AQK4R/dQTKJpHnf73tww+6hqHeQOgjWvN7aErpa6YncHMTg9gRH+WHAhgDTAJ5E/NM76HakIdotLw24hOsIXwQ==",
            "output_file_mode": null,
            "output_md5": "665c33a8419469030e5604b4d1cdb2b7",
            "output_path": "./lambda_zips/SummarizeSingleStudyLambda.zip",
            "output_sha": "07643fc2dc1a64d9a24aef3f1c2dcc513c818cd5",
            "output_sha256": "1f6612f66cc6c3258c53076f481d35f7fb33d7849974dd46a43f91cf8eceba0a",
            "output_sha512": "0102b847f7504ca2691e77fbdedc30fba86a1de40e8235af37b684ae96ba62770731383d8111fe5870218034c027913f34cefa1da908768b4bc36e213ac217c1",
            "output_size": 3987,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "../AWS_backend/lambda_functions/SummarizeSingleStudyLambda.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "update_folder_metadata_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "e5d3047b133143df9d0db7e8c4ce8dd8310134cd",
            "output_base64sha256": "pnLzH1VVDa3h4i+IWTku/PFTnhHVH3SnRQzoxv/Xt0c=",
            "output_base64sha512": "Tpb7n9FlyB7bru3erHBujdeDNexfx7XwghkxG7LkUGiIy7jWjWSnHznlQCxtd1A22839inQzsyj58A5Ft/Djzw==",
            "output_file_mode": null,
            "output_md5": "30538b25d89e8785f128c101afa0629c",
            "output_path": "./lambda_zips/UpdateFolderMetadataLambda.zip",
            "output_sha": "e5d3047b133143df9d0db7e8c4ce8dd8310134cd",
            "output_sha256": "a672f31f55550dade1e22f8859392efcf1539e11d51f74a7450ce8c6ffd7b747",
            "output_sha512": "4e96fb9fd165c81edbaeeddeac706e8dd78335ec5fc7b5f08219311bb2e4506888cbb8d68d64a71f39e5402c6d775036dbcdfd8a7433b328f9f00e45b7f0e3cf",
            "output_size": 1768,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "../AWS_backend/lambda_functions/UpdateFolderMetadataLambda.py",
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "510297366615",
            "arn": "arn:aws:iam::510297366615:user/vishal",
            "id": "510297366615",
            "user_id": "AIDAXNUAX4BL6GZ7G2HKR"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "US East (N. Virginia)",
            "endpoint": "ec2.us-east-1.amazonaws.com",
            "id": "us-east-1",
            "name": "us-east-1"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_api",
      "name": "rag_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_endpoint": "https://nkogh4squl.execute-api.us-east-1.amazonaws.com",
            "api_key_selection_expression": "$request.header.x-api-key",
            "arn": "arn:aws:apigateway:us-east-1::/apis/nkogh4squl",
            "body": null,
            "cors_configuration": [
              {
                "allow_credentials": false,
                "allow_headers": [
                  "authorization",
                  "content-type",
                  "x-amz-date",
                  "x-amz-security-token",
                  "x-api-key"
                ],
                "allow_methods": [
                  "GET",
                  "OPTIONS",
                  "POST"
                ],
                "allow_origins": [
                  "http://localhost:3000",
                  "https://meddocs.sriganesh.blog"
                ],
                "expose_headers": [],
                "max_age": 3600
              }
            ],
            "credentials_arn": null,
            "description": "",
            "disable_execute_api_endpoint": false,
            "execution_arn": "arn:aws:execute-api:us-east-1:510297366615:nkogh4squl",
            "fail_on_warnings": null,
            "id": "nkogh4squl",
            "ip_address_type": "ipv4",
            "name": "app-rag-HttpApi",
            "protocol_type": "HTTP",
            "route_key": null,
            "route_selection_expression": "$request.method $request.path",
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "target": null,
            "version": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_authorizer",
      "name": "cognito_authorizer",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "nkogh4squl",
            "authorizer_credentials_arn": "",
            "authorizer_payload_format_version": "",
            "authorizer_result_ttl_in_seconds": 0,
            "authorizer_type": "JWT",
            "authorizer_uri": "",
            "enable_simple_responses": false,
            "id": "upsdwh",
            "identity_sources": [
              "$request.header.Authorization"
            ],
            "jwt_configuration": [
              {
                "audience": [
                  "7rinto1hm9grfjluf5khm9jjp8"
                ],
                "issuer": "https://cognito-idp.us-east-1.amazonaws.com/us-east-1_QDYN9ICmW"
              }
            ],
            "name": "app-rag-CognitoAuthorizer",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_apigatewayv2_api.rag_api",
            "aws_cognito_user_pool.app_user_pool",
            "aws_cognito_user_pool_client.app_client"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_integration",
      "name": "list_files_integration",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "nkogh4squl",
            "connection_id": "",
            "connection_type": "INTERNET",
            "content_handling_strategy": "",
            "credentials_arn": "",
            "description": "",
            "id": "rfqj2wh",
            "integration_method": "POST",
            "integration_response_selection_expression": "",
            "integration_subtype": "",
            "integration_type": "AWS_PROXY",
            "integration_uri": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-ListUserFiles/invocations",
            "passthrough_behavior": "",
            "payload_format_version": "2.0",
            "request_parameters": {},
            "request_templates": {},
            "response_parameters": [],
            "template_selection_expression": "",
            "timeout_milliseconds": 30000,
            "tls_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.rag_api",
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.list_user_files_lambda",
            "data.archive_file.list_user_files_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_integration",
      "name": "process_folder_integration",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "nkogh4squl",
            "connection_id": "",
            "connection_type": "INTERNET",
            "content_handling_strategy": "",
            "credentials_arn": "",
            "description": "",
            "id": "tylw3dj",
            "integration_method": "POST",
            "integration_response_selection_expression": "",
            "integration_subtype": "",
            "integration_type": "AWS_PROXY",
            "integration_uri": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-InitiateFolderProcessing/invocations",
            "passthrough_behavior": "",
            "payload_format_version": "2.0",
            "request_parameters": {},
            "request_templates": {},
            "response_parameters": [],
            "template_selection_expression": "",
            "timeout_milliseconds": 30000,
            "tls_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.rag_api",
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role.sfn_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_lambda_function.identify_studies_lambda",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_function.initiate_folder_processing_lambda",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_lambda_function.update_folder_metadata_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "aws_sfn_state_machine.folder_processing_state_machine",
            "data.archive_file.aggregate_results_zip",
            "data.archive_file.identify_studies_zip",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "data.archive_file.initiate_folder_processing_zip",
            "data.archive_file.summarize_single_study_zip",
            "data.archive_file.update_folder_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_route",
      "name": "myfiles_get_route",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "nkogh4squl",
            "api_key_required": false,
            "authorization_scopes": [],
            "authorization_type": "JWT",
            "authorizer_id": "upsdwh",
            "id": "5l4uxs7",
            "model_selection_expression": "",
            "operation_name": "",
            "request_models": {},
            "request_parameter": [],
            "route_key": "GET /myfiles",
            "route_response_selection_expression": "",
            "target": "integrations/rfqj2wh"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.rag_api",
            "aws_apigatewayv2_authorizer.cognito_authorizer",
            "aws_apigatewayv2_integration.list_files_integration",
            "aws_cognito_user_pool.app_user_pool",
            "aws_cognito_user_pool_client.app_client",
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.list_user_files_lambda",
            "data.archive_file.list_user_files_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_route",
      "name": "processfolder_post_route",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "nkogh4squl",
            "api_key_required": false,
            "authorization_scopes": [],
            "authorization_type": "JWT",
            "authorizer_id": "upsdwh",
            "id": "l1kk981",
            "model_selection_expression": "",
            "operation_name": "",
            "request_models": {},
            "request_parameter": [],
            "route_key": "POST /processfolder",
            "route_response_selection_expression": "",
            "target": "integrations/tylw3dj"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.rag_api",
            "aws_apigatewayv2_authorizer.cognito_authorizer",
            "aws_apigatewayv2_integration.process_folder_integration",
            "aws_cognito_user_pool.app_user_pool",
            "aws_cognito_user_pool_client.app_client",
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role.sfn_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_lambda_function.identify_studies_lambda",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_function.initiate_folder_processing_lambda",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_lambda_function.update_folder_metadata_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "aws_sfn_state_machine.folder_processing_state_machine",
            "data.archive_file.aggregate_results_zip",
            "data.archive_file.identify_studies_zip",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "data.archive_file.initiate_folder_processing_zip",
            "data.archive_file.summarize_single_study_zip",
            "data.archive_file.update_folder_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_stage",
      "name": "rag_api_stage",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_log_settings": [],
            "api_id": "nkogh4squl",
            "arn": "arn:aws:apigateway:us-east-1::/apis/nkogh4squl/stages/$default",
            "auto_deploy": true,
            "client_certificate_id": "",
            "default_route_settings": [
              {
                "data_trace_enabled": false,
                "detailed_metrics_enabled": false,
                "logging_level": "",
                "throttling_burst_limit": 0,
                "throttling_rate_limit": 0
              }
            ],
            "deployment_id": "vkpyys",
            "description": "",
            "execution_arn": "arn:aws:execute-api:us-east-1:510297366615:nkogh4squl/$default",
            "id": "$default",
            "invoke_url": "https://nkogh4squl.execute-api.us-east-1.amazonaws.com/",
            "name": "$default",
            "route_settings": [],
            "stage_variables": {},
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.rag_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cognito_user_pool",
      "name": "app_user_pool",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_recovery_setting": [
              {
                "recovery_mechanism": [
                  {
                    "name": "verified_email",
                    "priority": 1
                  },
                  {
                    "name": "verified_phone_number",
                    "priority": 2
                  }
                ]
              }
            ],
            "admin_create_user_config": [
              {
                "allow_admin_create_user_only": false,
                "invite_message_template": []
              }
            ],
            "alias_attributes": [
              "email"
            ],
            "arn": "arn:aws:cognito-idp:us-east-1:510297366615:userpool/us-east-1_QDYN9ICmW",
            "auto_verified_attributes": [
              "email"
            ],
            "creation_date": "2025-06-29T20:55:21Z",
            "custom_domain": "",
            "deletion_protection": "INACTIVE",
            "device_configuration": [],
            "domain": "",
            "email_configuration": [
              {
                "configuration_set": "",
                "email_sending_account": "COGNITO_DEFAULT",
                "from_email_address": "",
                "reply_to_email_address": "",
                "source_arn": ""
              }
            ],
            "email_mfa_configuration": [],
            "email_verification_message": "",
            "email_verification_subject": "",
            "endpoint": "cognito-idp.us-east-1.amazonaws.com/us-east-1_QDYN9ICmW",
            "estimated_number_of_users": 0,
            "id": "us-east-1_QDYN9ICmW",
            "lambda_config": [],
            "last_modified_date": "2025-06-29T20:55:21Z",
            "mfa_configuration": "OFF",
            "name": "app-users",
            "password_policy": [
              {
                "minimum_length": 8,
                "password_history_size": 0,
                "require_lowercase": true,
                "require_numbers": true,
                "require_symbols": true,
                "require_uppercase": true,
                "temporary_password_validity_days": 7
              }
            ],
            "schema": [
              {
                "attribute_data_type": "String",
                "developer_only_attribute": false,
                "mutable": true,
                "name": "email",
                "number_attribute_constraints": [],
                "required": true,
                "string_attribute_constraints": []
              }
            ],
            "sign_in_policy": [
              {
                "allowed_first_auth_factors": [
                  "PASSWORD"
                ]
              }
            ],
            "sms_authentication_message": "",
            "sms_configuration": [],
            "sms_verification_message": "",
            "software_token_mfa_configuration": [],
            "tags": {},
            "tags_all": {},
            "user_attribute_update_settings": [],
            "user_pool_add_ons": [],
            "user_pool_tier": "ESSENTIALS",
            "username_attributes": [],
            "username_configuration": [
              {
                "case_sensitive": false
              }
            ],
            "verification_message_template": [
              {
                "default_email_option": "CONFIRM_WITH_CODE",
                "email_message": "",
                "email_message_by_link": "",
                "email_subject": "",
                "email_subject_by_link": "",
                "sms_message": ""
              }
            ],
            "web_authn_configuration": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cognito_user_pool_client",
      "name": "app_client",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_token_validity": 0,
            "allowed_oauth_flows": [
              "code"
            ],
            "allowed_oauth_flows_user_pool_client": true,
            "allowed_oauth_scopes": [
              "email",
              "openid",
              "phone",
              "profile"
            ],
            "analytics_configuration": [],
            "auth_session_validity": 3,
            "callback_urls": [
              "http://localhost:3001/callback"
            ],
            "client_secret": "gk1c618ud3ffuovvnbr5mtt1s7vtc58364of1j2inamvhhd5f33",
            "default_redirect_uri": "",
            "enable_propagate_additional_user_context_data": false,
            "enable_token_revocation": true,
            "explicit_auth_flows": [
              "ALLOW_CUSTOM_AUTH",
              "ALLOW_REFRESH_TOKEN_AUTH",
              "ALLOW_USER_PASSWORD_AUTH",
              "ALLOW_USER_SRP_AUTH"
            ],
            "generate_secret": true,
            "id": "7rinto1hm9grfjluf5khm9jjp8",
            "id_token_validity": 0,
            "logout_urls": [
              "http://localhost:3000",
              "http://localhost:3001"
            ],
            "name": "app-front",
            "prevent_user_existence_errors": "",
            "read_attributes": [],
            "refresh_token_rotation": [],
            "refresh_token_validity": 30,
            "supported_identity_providers": [
              "COGNITO"
            ],
            "token_validity_units": [],
            "user_pool_id": "us-east-1_QDYN9ICmW",
            "write_attributes": []
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "client_secret"
              }
            ]
          ],
          "identity_schema_version": 0,
          "dependencies": [
            "aws_cognito_user_pool.app_user_pool"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cognito_user_pool_domain",
      "name": "app_user_pool_domain",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "aws_account_id": "510297366615",
            "certificate_arn": "",
            "cloudfront_distribution": "d3oia8etllorh5.cloudfront.net",
            "cloudfront_distribution_arn": "d3oia8etllorh5.cloudfront.net",
            "cloudfront_distribution_zone_id": "Z2FDTNDATAQYW2",
            "domain": "app-auth-01233",
            "id": "app-auth-01233",
            "managed_login_version": 1,
            "s3_bucket": "aws-cognito-prod-iad-assets",
            "user_pool_id": "us-east-1_QDYN9ICmW",
            "version": "20250629210230"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cognito_user_pool.app_user_pool"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "file_metadata_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:510297366615:table/FileMetadata-dev-metadata",
            "attribute": [
              {
                "name": "sessionId#fileName",
                "type": "S"
              },
              {
                "name": "userId",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "deletion_protection_enabled": false,
            "global_secondary_index": [],
            "hash_key": "userId",
            "id": "FileMetadata-dev-metadata",
            "import_table": [],
            "local_secondary_index": [],
            "name": "FileMetadata-dev-metadata",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false,
                "recovery_period_in_days": 0
              }
            ],
            "range_key": "sessionId#fileName",
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Environment": "dev",
              "Project": "app-rag"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "app-rag"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_custom_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::510297366615:policy/app-rag-lambda-custom-policy",
            "attachment_count": 1,
            "description": "",
            "id": "arn:aws:iam::510297366615:policy/app-rag-lambda-custom-policy",
            "name": "app-rag-lambda-custom-policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"dynamodb:PutItem\",\"dynamodb:UpdateItem\",\"dynamodb:GetItem\",\"dynamodb:Query\",\"dynamodb:DeleteItem\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-east-1:510297366615:table/FileMetadata-dev-metadata\"},{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::bucket33-rmmleo\",\"arn:aws:s3:::bucket33-rmmleo/*\"]},{\"Action\":[\"bedrock:RetrieveAndGenerate\",\"bedrock:Retrieve\",\"bedrock:InvokeModel\",\"bedrock:GetIngestionJob\",\"bedrock:StartIngestionJob\",\"bedrock:ListIngestionJobs\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:bedrock:us-east-1:510297366615:knowledge-base/*\",\"arn:aws:bedrock:us-east-1::foundation-model/*\",\"arn:aws:bedrock:us-east-1::inference-profile/*\"]},{\"Action\":[\"textract:StartDocumentTextDetection\",\"textract:GetDocumentTextDetection\",\"textract:StartDocumentAnalysis\",\"textract:GetDocumentAnalysis\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":\"states:StartExecution\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:states:us-east-1:510297366615:stateMachine:app-rag-FolderProcessingStateMachine\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAXNUAX4BLQZL56MK37",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role.sfn_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_lambda_function.identify_studies_lambda",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_lambda_function.update_folder_metadata_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "aws_sfn_state_machine.folder_processing_state_machine",
            "data.archive_file.aggregate_results_zip",
            "data.archive_file.identify_studies_zip",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "data.archive_file.summarize_single_study_zip",
            "data.archive_file.update_folder_metadata_zip",
            "data.aws_caller_identity.current",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "sfn_lambda_invoke_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::510297366615:policy/app-rag-sfn-lambda-invoke-policy",
            "attachment_count": 1,
            "description": "",
            "id": "arn:aws:iam::510297366615:policy/app-rag-sfn-lambda-invoke-policy",
            "name": "app-rag-sfn-lambda-invoke-policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":\"lambda:InvokeFunction\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-IngestToBedrockKB\",\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-UpdateFolderMetadata\",\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-IdentifyStudiesLambda\",\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-SummarizeSingleStudyLambda\",\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-AggregateResultsLambda\"],\"Sid\":\"LambdaInvoke\"},{\"Action\":\"states:StartExecution\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:states:us-east-1:510297366615:stateMachine:app-rag-FolderProcessingStateMachine\",\"Sid\":\"StepFunctionsStartExecution\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAXNUAX4BL6LQ2WIXCK",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role.sfn_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_lambda_function.identify_studies_lambda",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_lambda_function.update_folder_metadata_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "aws_sfn_state_machine.folder_processing_state_machine",
            "data.archive_file.aggregate_results_zip",
            "data.archive_file.identify_studies_zip",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "data.archive_file.summarize_single_study_zip",
            "data.archive_file.update_folder_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_exec_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-29T20:55:21Z",
            "description": "",
            "force_detach_policies": false,
            "id": "app-rag-lambda-exec-role",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::510297366615:policy/app-rag-lambda-custom-policy",
              "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
            ],
            "max_session_duration": 3600,
            "name": "app-rag-lambda-exec-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "unique_id": "AROAXNUAX4BLZKDQL35HP"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "sfn_exec_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::510297366615:role/app-rag-sfn-exec-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-29T20:55:21Z",
            "description": "",
            "force_detach_policies": false,
            "id": "app-rag-sfn-exec-role",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::510297366615:policy/app-rag-sfn-lambda-invoke-policy"
            ],
            "max_session_duration": 3600,
            "name": "app-rag-sfn-exec-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "unique_id": "AROAXNUAX4BL4FZANTFBS"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_basic_execution",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "app-rag-lambda-exec-role-20250629205522035100000001",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
            "role": "app-rag-lambda-exec-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_exec_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_custom_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "app-rag-lambda-exec-role-20250629205625702200000005",
            "policy_arn": "arn:aws:iam::510297366615:policy/app-rag-lambda-custom-policy",
            "role": "app-rag-lambda-exec-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_policy.lambda_custom_policy",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role.sfn_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_lambda_function.identify_studies_lambda",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_lambda_function.update_folder_metadata_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "aws_sfn_state_machine.folder_processing_state_machine",
            "data.archive_file.aggregate_results_zip",
            "data.archive_file.identify_studies_zip",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "data.archive_file.summarize_single_study_zip",
            "data.archive_file.update_folder_metadata_zip",
            "data.aws_caller_identity.current",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "sfn_lambda_invoke_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "app-rag-sfn-exec-role-20250629205625700300000004",
            "policy_arn": "arn:aws:iam::510297366615:policy/app-rag-sfn-lambda-invoke-policy",
            "role": "app-rag-sfn-exec-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_policy.sfn_lambda_invoke_policy",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role.sfn_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_lambda_function.identify_studies_lambda",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_lambda_function.update_folder_metadata_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "aws_sfn_state_machine.folder_processing_state_machine",
            "data.archive_file.aggregate_results_zip",
            "data.archive_file.identify_studies_zip",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "data.archive_file.summarize_single_study_zip",
            "data.archive_file.update_folder_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "aggregate_results_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-AggregateResultsLambda",
            "code_sha256": "vsqz2LPQVOPu4P7eV3/yn8jBF8cXGSoY9JhqX7jf4yM=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "S3_BUCKET_NAME": "bucket33-rmmleo"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./lambda_zips/AggregateResultsLambda.zip",
            "function_name": "app-rag-AggregateResultsLambda",
            "handler": "AggregateResultsLambda.lambda_handler",
            "id": "app-rag-AggregateResultsLambda",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-AggregateResultsLambda/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-29T20:55:42.958+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/app-rag-AggregateResultsLambda",
                "system_log_level": ""
              }
            ],
            "memory_size": 200,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-AggregateResultsLambda:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-AggregateResultsLambda:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "runtime": "python3.12",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "vsqz2LPQVOPu4P7eV3/yn8jBF8cXGSoY9JhqX7jf4yM=",
            "source_code_size": 911,
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_iam_role.lambda_exec_role",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.aggregate_results_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "delete_s3_metadata_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-DeleteS3FileMetadata",
            "code_sha256": "VK0dcyNaWeOopV8xF391KweTEnXVG6ccij0HYrSqnZo=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "DYNAMODB_TABLE_NAME": "FileMetadata-dev-metadata"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./lambda_zips/DeleteS3FileMetadataFromDynamoDB.zip",
            "function_name": "app-rag-DeleteS3FileMetadata",
            "handler": "DeleteS3FileMetadataFromDynamoDB.lambda_handler",
            "id": "app-rag-DeleteS3FileMetadata",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-DeleteS3FileMetadata/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-29T20:55:54.862+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/app-rag-DeleteS3FileMetadata",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-DeleteS3FileMetadata:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-DeleteS3FileMetadata:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "runtime": "python3.12",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "VK0dcyNaWeOopV8xF391KweTEnXVG6ccij0HYrSqnZo=",
            "source_code_size": 1251,
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "data.archive_file.delete_s3_metadata_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "identify_studies_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-IdentifyStudiesLambda",
            "code_sha256": "K31BEtBzNsxZcrLcaPgoYcxpl2HRKb6A8FCe+Hc7z9U=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "BEDROCK_SUMMARY_MODEL_ID": "anthropic.claude-3-sonnet-20240229-v1:0",
                  "KB_ID": "FAUCSVWT9A"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./lambda_zips/IdentifyStudiesLambda.zip",
            "function_name": "app-rag-IdentifyStudiesLambda",
            "handler": "IdentifyStudiesLambda.lambda_handler",
            "id": "app-rag-IdentifyStudiesLambda",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-IdentifyStudiesLambda/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-29T20:55:31.072+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/app-rag-IdentifyStudiesLambda",
                "system_log_level": ""
              }
            ],
            "memory_size": 200,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-IdentifyStudiesLambda:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-IdentifyStudiesLambda:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "runtime": "python3.12",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "K31BEtBzNsxZcrLcaPgoYcxpl2HRKb6A8FCe+Hc7z9U=",
            "source_code_size": 2285,
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_iam_role.lambda_exec_role",
            "data.archive_file.identify_studies_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "ingest_file_to_bedrock_kb_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-IngestToBedrockKB",
            "code_sha256": "8ZvjOIJzuqf+XujZCR2NOA0p5jLOiq/Kdl2JHKz4O8g=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "BEDROCK_REGION": "us-east-1",
                  "DATA_SOURCE_ID": "YLTATGNXDU",
                  "DESTINATION_S3_BUCKET": "bucket33-rmmleo",
                  "DESTINATION_S3_PREFIX": "kb-source/",
                  "DYNAMODB_TABLE_NAME": "FileMetadata-dev-metadata",
                  "KB_DATASOURCE_ID": "YLTATGNXDU",
                  "KB_ID": "FAUCSVWT9A",
                  "KB_S3_SOURCE_BUCKET": "bucket33-rmmleo",
                  "KB_S3_SOURCE_PREFIX": "kb-source",
                  "KNOWLEDGE_BASE_ID": "FAUCSVWT9A",
                  "S3_BUCKET_NAME": "bucket33-rmmleo"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 3000
              }
            ],
            "file_system_config": [],
            "filename": "./lambda_zips/IngestFileToBedrockKBLambda.zip",
            "function_name": "app-rag-IngestToBedrockKB",
            "handler": "IngestFileToBedrockKBLambda.lambda_handler",
            "id": "app-rag-IngestToBedrockKB",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-IngestToBedrockKB/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-29T20:56:18.782+0000",
            "layers": [
              "arn:aws:lambda:us-east-1:510297366615:layer:app-rag-textractor-py312:1",
              "arn:aws:lambda:us-east-1:336392948345:layer:AWSSDKPandas-Python312:17",
              "arn:aws:lambda:us-east-1:510297366615:layer:app-rag-json_repair:1"
            ],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/app-rag-IngestToBedrockKB",
                "system_log_level": ""
              }
            ],
            "memory_size": 3008,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-IngestToBedrockKB:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-IngestToBedrockKB:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "runtime": "python3.12",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "8ZvjOIJzuqf+XujZCR2NOA0p5jLOiq/Kdl2JHKz4O8g=",
            "source_code_size": 4884,
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "initiate_folder_processing_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-InitiateFolderProcessing",
            "code_sha256": "6puVXFtxwZBoNmuvKf1zEepajPnfSIXFuXiJeXEVoHM=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "S3_BUCKET_NAME": "bucket33-rmmleo",
                  "STATE_MACHINE_ARN": "arn:aws:states:us-east-1:510297366615:stateMachine:app-rag-FolderProcessingStateMachine"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./lambda_zips/InitiateFolderProcessingLambda.zip",
            "function_name": "app-rag-InitiateFolderProcessing",
            "handler": "InitiateFolderProcessingLambda.lambda_handler",
            "id": "app-rag-InitiateFolderProcessing",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-InitiateFolderProcessing/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-29T20:56:25.416+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/app-rag-InitiateFolderProcessing",
                "system_log_level": ""
              }
            ],
            "memory_size": 500,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-InitiateFolderProcessing:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-InitiateFolderProcessing:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "runtime": "python3.12",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "6puVXFtxwZBoNmuvKf1zEepajPnfSIXFuXiJeXEVoHM=",
            "source_code_size": 1881,
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeout": 243,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role.sfn_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_lambda_function.identify_studies_lambda",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_lambda_function.update_folder_metadata_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "aws_sfn_state_machine.folder_processing_state_machine",
            "data.archive_file.aggregate_results_zip",
            "data.archive_file.identify_studies_zip",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "data.archive_file.initiate_folder_processing_zip",
            "data.archive_file.summarize_single_study_zip",
            "data.archive_file.update_folder_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "list_user_files_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-ListUserFiles",
            "code_sha256": "4zC9xcymtG2KVySXcg+wJh101ErblcH1EXcAV6rB3eg=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "DYNAMODB_TABLE_NAME": "FileMetadata-dev-metadata"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./lambda_zips/ListUserFilesFromDynamoDB.zip",
            "function_name": "app-rag-ListUserFiles",
            "handler": "ListUserFilesFromDynamoDB.lambda_handler",
            "id": "app-rag-ListUserFiles",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-ListUserFiles/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-29T20:56:06.781+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/app-rag-ListUserFiles",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-ListUserFiles:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-ListUserFiles:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "runtime": "python3.12",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "4zC9xcymtG2KVySXcg+wJh101ErblcH1EXcAV6rB3eg=",
            "source_code_size": 1707,
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeout": 603,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "data.archive_file.list_user_files_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "record_s3_metadata_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-RecordS3FileMetadata",
            "code_sha256": "LKdZHzOyf7iw+jK4osxdUJs6pLAKSIehmQNpcmfLwuQ=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "DYNAMODB_TABLE_NAME": "FileMetadata-dev-metadata"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./lambda_zips/RecordS3FileMetadataToDynamoDB.zip",
            "function_name": "app-rag-RecordS3FileMetadata",
            "handler": "RecordS3FileMetadataToDynamoDB.lambda_handler",
            "id": "app-rag-RecordS3FileMetadata",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-RecordS3FileMetadata/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-29T20:55:48.897+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/app-rag-RecordS3FileMetadata",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-RecordS3FileMetadata:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-RecordS3FileMetadata:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "runtime": "python3.12",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "LKdZHzOyf7iw+jK4osxdUJs6pLAKSIehmQNpcmfLwuQ=",
            "source_code_size": 1396,
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "data.archive_file.record_s3_metadata_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "summarize_folder_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-SummarizeFolder",
            "code_sha256": "wYMSr5Xul9hQkyoEEyden9+Du/j/dYhUkU4pPHn7jlA=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "BEDROCK_SUMMARY_MODEL_ID": "anthropic.claude-3-sonnet-20240229-v1:0",
                  "DYNAMODB_TABLE_NAME": "FileMetadata-dev-metadata",
                  "KB_ID": "FAUCSVWT9A",
                  "S3_BUCKET_NAME": "bucket33-rmmleo",
                  "S3_SUMMARY_PREFIX": "folder-summaries",
                  "SUMMARY_MODEL_ID": "anthropic.claude-3-sonnet-20240229-v1:0"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 3000
              }
            ],
            "file_system_config": [],
            "filename": "./lambda_zips/SummarizeFolderLambda.zip",
            "function_name": "app-rag-SummarizeFolder",
            "handler": "SummarizeFolderLambda.lambda_handler",
            "id": "app-rag-SummarizeFolder",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-SummarizeFolder/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-29T20:56:12.802+0000",
            "layers": [
              "arn:aws:lambda:us-east-1:510297366615:layer:app-rag-json_repair:1"
            ],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/app-rag-SummarizeFolder",
                "system_log_level": ""
              }
            ],
            "memory_size": 3000,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-SummarizeFolder:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-SummarizeFolder:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "runtime": "python3.12",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "wYMSr5Xul9hQkyoEEyden9+Du/j/dYhUkU4pPHn7jlA=",
            "source_code_size": 8070,
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_layer_version.json_repair",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.summarize_folder_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "summarize_single_study_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-SummarizeSingleStudyLambda",
            "code_sha256": "H2YS9mzGwyWMUwdvSB019/sz14SZdN1GpD+Rz47Ougo=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "BEDROCK_SUMMARY_MODEL_ID": "anthropic.claude-3-sonnet-20240229-v1:0",
                  "KB_ID": "FAUCSVWT9A",
                  "S3_BUCKET_NAME": "bucket33-rmmleo"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 1000
              }
            ],
            "file_system_config": [],
            "filename": "./lambda_zips/SummarizeSingleStudyLambda.zip",
            "function_name": "app-rag-SummarizeSingleStudyLambda",
            "handler": "SummarizeSingleStudyLambda.lambda_handler",
            "id": "app-rag-SummarizeSingleStudyLambda",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-SummarizeSingleStudyLambda/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-29T20:55:37.037+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/app-rag-SummarizeSingleStudyLambda",
                "system_log_level": ""
              }
            ],
            "memory_size": 1000,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-SummarizeSingleStudyLambda:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-SummarizeSingleStudyLambda:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "runtime": "python3.12",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "H2YS9mzGwyWMUwdvSB019/sz14SZdN1GpD+Rz47Ougo=",
            "source_code_size": 3987,
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_iam_role.lambda_exec_role",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.summarize_single_study_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "update_folder_metadata_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-UpdateFolderMetadata",
            "code_sha256": "pnLzH1VVDa3h4i+IWTku/PFTnhHVH3SnRQzoxv/Xt0c=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "DYNAMODB_TABLE_NAME": "FileMetadata-dev-metadata"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./lambda_zips/UpdateFolderMetadataLambda.zip",
            "function_name": "app-rag-UpdateFolderMetadata",
            "handler": "UpdateFolderMetadataLambda.lambda_handler",
            "id": "app-rag-UpdateFolderMetadata",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-UpdateFolderMetadata/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-29T20:56:00.877+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/app-rag-UpdateFolderMetadata",
                "system_log_level": ""
              }
            ],
            "memory_size": 500,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-UpdateFolderMetadata:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:510297366615:function:app-rag-UpdateFolderMetadata:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::510297366615:role/app-rag-lambda-exec-role",
            "runtime": "python3.12",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "pnLzH1VVDa3h4i+IWTku/PFTnhHVH3SnRQzoxv/Xt0c=",
            "source_code_size": 1768,
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeout": 243,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "data.archive_file.update_folder_metadata_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "aggregate_results_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "app-rag-AggregateResultsLambda",
            "id": "app-rag-AggregateResultsLambda",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 2,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.aggregate_results_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "delete_s3_metadata_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "app-rag-DeleteS3FileMetadata",
            "id": "app-rag-DeleteS3FileMetadata",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 2,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.delete_s3_metadata_lambda",
            "data.archive_file.delete_s3_metadata_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "identify_studies_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "app-rag-IdentifyStudiesLambda",
            "id": "app-rag-IdentifyStudiesLambda",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 2,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.identify_studies_lambda",
            "data.archive_file.identify_studies_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "ingest_file_to_bedrock_kb_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "app-rag-IngestToBedrockKB",
            "id": "app-rag-IngestToBedrockKB",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 2,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "initiate_folder_processing_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "app-rag-InitiateFolderProcessing",
            "id": "app-rag-InitiateFolderProcessing",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 2,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role.sfn_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_lambda_function.identify_studies_lambda",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_function.initiate_folder_processing_lambda",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_lambda_function.update_folder_metadata_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "aws_sfn_state_machine.folder_processing_state_machine",
            "data.archive_file.aggregate_results_zip",
            "data.archive_file.identify_studies_zip",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "data.archive_file.initiate_folder_processing_zip",
            "data.archive_file.summarize_single_study_zip",
            "data.archive_file.update_folder_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "list_user_files_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "app-rag-ListUserFiles",
            "id": "app-rag-ListUserFiles",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 2,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.list_user_files_lambda",
            "data.archive_file.list_user_files_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "record_s3_metadata_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "app-rag-RecordS3FileMetadata",
            "id": "app-rag-RecordS3FileMetadata",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 2,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.record_s3_metadata_lambda",
            "data.archive_file.record_s3_metadata_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "summarize_folder_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "app-rag-SummarizeFolder",
            "id": "app-rag-SummarizeFolder",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 2,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.summarize_folder_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.summarize_folder_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "summarize_single_study_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "app-rag-SummarizeSingleStudyLambda",
            "id": "app-rag-SummarizeSingleStudyLambda",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 2,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.summarize_single_study_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "update_folder_metadata_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "app-rag-UpdateFolderMetadata",
            "id": "app-rag-UpdateFolderMetadata",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 2,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.update_folder_metadata_lambda",
            "data.archive_file.update_folder_metadata_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "json_repair",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:510297366615:layer:app-rag-json_repair:1",
            "code_sha256": "FP/6ZAEPf1ehESfSLbb3m88VdEhiRrTnUgF67K/mkYY=",
            "compatible_architectures": [],
            "compatible_runtimes": [
              "python3.12"
            ],
            "created_date": "2025-06-29T20:55:24.662+0000",
            "description": "",
            "filename": "./lambda_layers/json_repair.zip",
            "id": "arn:aws:lambda:us-east-1:510297366615:layer:app-rag-json_repair:1",
            "layer_arn": "arn:aws:lambda:us-east-1:510297366615:layer:app-rag-json_repair",
            "layer_name": "app-rag-json_repair",
            "license_info": "",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "source_code_hash": "",
            "source_code_size": 104400,
            "version": "1"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "textractor",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:510297366615:layer:app-rag-textractor-py312:1",
            "code_sha256": "zp/18Cv63wzrQSPr+ypnbsuHB52HjnB6+7ssD9gK7Pc=",
            "compatible_architectures": [],
            "compatible_runtimes": [
              "python3.12"
            ],
            "created_date": "2025-06-29T20:55:34.798+0000",
            "description": "",
            "filename": "./lambda_layers/textractor-layer-py312.zip",
            "id": "arn:aws:lambda:us-east-1:510297366615:layer:app-rag-textractor-py312:1",
            "layer_arn": "arn:aws:lambda:us-east-1:510297366615:layer:app-rag-textractor-py312",
            "layer_name": "app-rag-textractor-py312",
            "license_info": "",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "source_code_hash": "",
            "source_code_size": 22924640,
            "version": "1"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_s3_to_invoke_delete_metadata",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "app-rag-DeleteS3FileMetadata",
            "function_url_auth_type": null,
            "id": "AllowS3InvokeDeleteMetadata",
            "principal": "s3.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:s3:::bucket33-rmmleo",
            "statement_id": "AllowS3InvokeDeleteMetadata",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.delete_s3_metadata_lambda",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.delete_s3_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_s3_to_invoke_record_metadata",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "app-rag-RecordS3FileMetadata",
            "function_url_auth_type": null,
            "id": "AllowS3InvokeRecordMetadata",
            "principal": "s3.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:s3:::bucket33-rmmleo",
            "statement_id": "AllowS3InvokeRecordMetadata",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.record_s3_metadata_lambda",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.record_s3_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "apigw_invoke_initiate_folder_processing_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "app-rag-InitiateFolderProcessing",
            "function_url_auth_type": null,
            "id": "AllowAPIGWInvokeInitiateFolderProcessing",
            "principal": "apigateway.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:execute-api:us-east-1:510297366615:nkogh4squl/*",
            "statement_id": "AllowAPIGWInvokeInitiateFolderProcessing",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.rag_api",
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role.sfn_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_lambda_function.identify_studies_lambda",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_function.initiate_folder_processing_lambda",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_lambda_function.update_folder_metadata_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "aws_sfn_state_machine.folder_processing_state_machine",
            "data.archive_file.aggregate_results_zip",
            "data.archive_file.identify_studies_zip",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "data.archive_file.initiate_folder_processing_zip",
            "data.archive_file.summarize_single_study_zip",
            "data.archive_file.update_folder_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "apigw_invoke_list_files_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "app-rag-ListUserFiles",
            "function_url_auth_type": null,
            "id": "AllowAPIGWInvokeListFiles",
            "principal": "apigateway.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:execute-api:us-east-1:510297366615:nkogh4squl/*",
            "statement_id": "AllowAPIGWInvokeListFiles",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.rag_api",
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.list_user_files_lambda",
            "data.archive_file.list_user_files_zip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "main_bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::bucket33-rmmleo",
            "bucket": "bucket33-rmmleo",
            "bucket_domain_name": "bucket33-rmmleo.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "bucket33-rmmleo.s3.us-east-1.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [
              {
                "id": "0e775020b7e8131c326c4ec94764cc1e0063ee46d30e4d8cc535d4a0f3a7335c",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "bucket33-rmmleo",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "Project": "app-rag",
              "Purpose": "MainApplicationBucket"
            },
            "tags_all": {
              "Project": "app-rag",
              "Purpose": "MainApplicationBucket"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_notification",
      "name": "main_bucket_notifications",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "bucket33-rmmleo",
            "eventbridge": false,
            "id": "bucket33-rmmleo",
            "lambda_function": [
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "",
                "filter_suffix": "",
                "id": "tf-s3-lambda-20250629205600869500000002",
                "lambda_function_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-RecordS3FileMetadata"
              },
              {
                "events": [
                  "s3:ObjectRemoved:*"
                ],
                "filter_prefix": "",
                "filter_suffix": "",
                "id": "tf-s3-lambda-20250629205600869500000003",
                "lambda_function_arn": "arn:aws:lambda:us-east-1:510297366615:function:app-rag-DeleteS3FileMetadata"
              }
            ],
            "queue": [],
            "topic": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.delete_s3_metadata_lambda",
            "aws_lambda_function.record_s3_metadata_lambda",
            "aws_lambda_permission.allow_s3_to_invoke_delete_metadata",
            "aws_lambda_permission.allow_s3_to_invoke_record_metadata",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.delete_s3_metadata_zip",
            "data.archive_file.record_s3_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_ownership_controls",
      "name": "main_bucket_ownership",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "bucket33-rmmleo",
            "id": "bucket33-rmmleo",
            "rule": [
              {
                "object_ownership": "BucketOwnerEnforced"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.main_bucket",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_sfn_state_machine",
      "name": "folder_processing_state_machine",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:states:us-east-1:510297366615:stateMachine:app-rag-FolderProcessingStateMachine",
            "creation_date": "2025-06-29T20:56:25Z",
            "definition": "{\"Comment\":\"Orchestrates Bedrock KB ingestion, then fans out to summarize each study reliably.\",\"StartAt\":\"IngestFilesMap\",\"States\":{\"AggregateResults\":{\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"FolderProcessingFailed\",\"ResultPath\":\"$.errorInfo\"}],\"Comment\":\"Aggregates all summaries from S3 into one file and returns its pointer.\",\"Next\":\"UpdateFolderStatusSuccess\",\"Parameters\":{\"FunctionName\":\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-AggregateResultsLambda\",\"Payload.$\":\"$.summaryRefs\"},\"Resource\":\"arn:aws:states:::lambda:invoke\",\"ResultPath\":\"$.aggregateOutput\",\"Type\":\"Task\"},\"FolderProcessingFailed\":{\"End\":true,\"Parameters\":{\"FunctionName\":\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-UpdateFolderMetadata\",\"Payload\":{\"errorDetails.$\":\"$.errorInfo\",\"folderId.$\":\"$.folderId\",\"status\":\"folder_processing_failed\",\"userId.$\":\"$.userId\"}},\"Resource\":\"arn:aws:states:::lambda:invoke\",\"Type\":\"Task\"},\"IdentifyStudiesToSummarize\":{\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"FolderProcessingFailed\",\"ResultPath\":\"$.errorInfo\"}],\"Comment\":\"Scans all documents to create a to-do list of studies to summarize.\",\"Next\":\"ProcessStudiesInParallel\",\"Parameters\":{\"FunctionName\":\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-IdentifyStudiesLambda\",\"Payload\":{\"folderId.$\":\"$.folderId\",\"userId.$\":\"$.userId\"}},\"Resource\":\"arn:aws:states:::lambda:invoke\",\"ResultPath\":\"$.studiesToProcess\",\"Type\":\"Task\"},\"IngestFilesMap\":{\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"FolderProcessingFailed\",\"ResultPath\":\"$.errorInfo\"}],\"Comment\":\"Processes each S3 file to ingest it into the Knowledge Base.\",\"InputPath\":\"$\",\"ItemProcessor\":{\"ProcessorConfig\":{\"ExecutionType\":\"STANDARD\",\"Mode\":\"DISTRIBUTED\"},\"StartAt\":\"IngestSingleFileToKB\",\"States\":{\"IngestSingleFileToKB\":{\"End\":true,\"Parameters\":{\"FunctionName\":\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-IngestToBedrockKB\",\"Payload.$\":\"$\"},\"Resource\":\"arn:aws:states:::lambda:invoke\",\"ResultPath\":null,\"Retry\":[{\"BackoffRate\":1.5,\"ErrorEquals\":[\"States.ALL\"],\"IntervalSeconds\":15,\"MaxAttempts\":2}],\"Type\":\"Task\"}}},\"ItemsPath\":\"$.s3ItemsToProcess\",\"MaxConcurrency\":1,\"Next\":\"IdentifyStudiesToSummarize\",\"Parameters\":{\"fileName.$\":\"$$.Map.Item.Value.fileName\",\"folderId.$\":\"$$.Map.Item.Value.folderId\",\"s3Key.$\":\"$$.Map.Item.Value.s3Key\",\"sessionId.$\":\"$$.Map.Item.Value.sessionId\",\"userId.$\":\"$$.Map.Item.Value.userId\"},\"ResultPath\":null,\"Type\":\"Map\"},\"ProcessStudiesInParallel\":{\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"FolderProcessingFailed\",\"ResultPath\":\"$.errorInfo\"}],\"Comment\":\"Processes 1 study at a time for maximum reliability.\",\"InputPath\":\"$.studiesToProcess.Payload\",\"ItemsPath\":\"$.studies\",\"Iterator\":{\"StartAt\":\"SummarizeSingleStudy\",\"States\":{\"SummarizeSingleStudy\":{\"Comment\":\"Summarizes one single study and writes to S3.\",\"End\":true,\"Parameters\":{\"FunctionName\":\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-SummarizeSingleStudyLambda\",\"Payload.$\":\"$\"},\"Resource\":\"arn:aws:states:::lambda:invoke\",\"ResultPath\":\"$\",\"ResultSelector\":{\"s3_key.$\":\"$.Payload.s3_key\",\"studyName.$\":\"$.Payload.studyName\"},\"Type\":\"Task\"}}},\"MaxConcurrency\":1,\"Next\":\"AggregateResults\",\"ResultPath\":\"$.summaryRefs\",\"Type\":\"Map\"},\"UpdateFolderStatusSuccess\":{\"Comment\":\"Marks the folder as successfully summarized, with a pointer to the aggregated file.\",\"End\":true,\"Parameters\":{\"FunctionName\":\"arn:aws:lambda:us-east-1:510297366615:function:app-rag-UpdateFolderMetadata\",\"Payload\":{\"folderId.$\":\"$.folderId\",\"status\":\"folder_summarized\",\"summaryCount.$\":\"$.aggregateOutput.Payload.summaryCount\",\"summaryS3Key.$\":\"$.aggregateOutput.Payload.aggregatedS3Key\",\"userId.$\":\"$.userId\"}},\"Resource\":\"arn:aws:states:::lambda:invoke\",\"Type\":\"Task\"}}}",
            "description": "",
            "encryption_configuration": [
              {
                "kms_data_key_reuse_period_seconds": 0,
                "kms_key_id": "",
                "type": "AWS_OWNED_KEY"
              }
            ],
            "id": "arn:aws:states:us-east-1:510297366615:stateMachine:app-rag-FolderProcessingStateMachine",
            "logging_configuration": [
              {
                "include_execution_data": false,
                "level": "OFF",
                "log_destination": ""
              }
            ],
            "name": "app-rag-FolderProcessingStateMachine",
            "name_prefix": "",
            "publish": false,
            "revision_id": "",
            "role_arn": "arn:aws:iam::510297366615:role/app-rag-sfn-exec-role",
            "state_machine_version_arn": "",
            "status": "ACTIVE",
            "tags": {
              "Project": "app-rag"
            },
            "tags_all": {
              "Project": "app-rag"
            },
            "timeouts": null,
            "tracing_configuration": [
              {
                "enabled": false
              }
            ],
            "type": "STANDARD",
            "version_description": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_dynamodb_table.file_metadata_table",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role.sfn_exec_role",
            "aws_lambda_function.aggregate_results_lambda",
            "aws_lambda_function.identify_studies_lambda",
            "aws_lambda_function.ingest_file_to_bedrock_kb_lambda",
            "aws_lambda_function.summarize_single_study_lambda",
            "aws_lambda_function.update_folder_metadata_lambda",
            "aws_lambda_layer_version.json_repair",
            "aws_lambda_layer_version.textractor",
            "aws_s3_bucket.main_bucket",
            "data.archive_file.aggregate_results_zip",
            "data.archive_file.identify_studies_zip",
            "data.archive_file.ingest_file_to_bedrock_kb_zip",
            "data.archive_file.summarize_single_study_zip",
            "data.archive_file.update_folder_metadata_zip",
            "random_string.bucket_suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "random_string",
      "name": "bucket_suffix",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "id": "rmmleo",
            "keepers": null,
            "length": 6,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": null,
            "result": "rmmleo",
            "special": false,
            "upper": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    }
  ],
  "check_results": null
}
